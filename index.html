<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spevník Mládež</title>
    <script src="https://cdn.jsdelivr.net/npm/chordsheetjs@5.0.0/dist/chordsheetjs.min.js"></script>
    <style>
        :root { --p: #1a73e8; --chord: #2563eb; --bg: #f8f9fa; }
        body { font-family: sans-serif; margin: 0; background: var(--bg); }
        .header { background: var(--p); color: white; padding: 15px; text-align: center; position: sticky; top: 0; z-index: 10; }
        .container { max-width: 700px; margin: auto; padding: 10px; }
        .song-card { background: white; padding: 15px; margin: 8px 0; border-radius: 10px; cursor: pointer; font-weight: bold; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        
        /* Štýl pre zobrazenie piesne */
        #view { display: none; background: white; min-height: 100vh; padding: 20px; }
        .controls { display: flex; gap: 10px; margin-bottom: 20px; padding-bottom: 10px; border-bottom: 1px solid #eee; }
        .btn { padding: 10px 15px; border: none; border-radius: 6px; cursor: pointer; font-weight: bold; background: #eee; }
        .btn-p { background: var(--p); color: white; }
        
        /* Formátovanie akordov - MODRÉ A TUČNÉ */
        .chord { 
            color: var(--chord) !important; 
            font-weight: bold !important; 
            position: relative; 
            display: inline-block;
            height: 1.5em; /* Vytvorí priestor nad textom */
            vertical-align: bottom;
        }
        #content { 
            white-space: pre-wrap; 
            line-height: 3; /* Väčší riadkovanie, aby sa akordy netlačili na text */
            font-family: 'Courier New', monospace; 
            font-size: 1.1em;
        }
    </style>
</head>
<body>

<div id="main-ui">
    <div class="header">
        <div class="container"><h2>Spevník Mládež</h2></div>
    </div>
    <div class="container" id="list"></div>
</div>

<div id="view">
    <div class="container">
        <div class="controls">
            <button class="btn" onclick="back()">← Späť</button>
            <button class="btn btn-p" onclick="changeKey(-1)">♭ Transponovať -</button>
            <button class="btn btn-p" onclick="changeKey(1)"># Transponovať +</button>
        </div>
        <h2 id="v-title" style="color:var(--p);"></h2>
        <div id="content"></div>
    </div>
</div>

<script>
    // Tu pridávam tvojich prvých 5 piesní ako ukážku (môžeš doplniť ďalšie)
    const database = [
        { t: "1. Zvelebený Pán", c: "1. Zvelebený buď tam, kde kraj medom oplýva, tam, kde rieky vždy hojné sú, zvelebený Pán." },
        { t: "3. Nádherný Boh", c: "[D]Úžasný, tak [E]úžasný si [F#m]v láske bez hra[A]níc\nTvoj [D]kríž mi dáva [E]milosť sľúbe[A]nú" },
        { t: "4. Bohatier", c: "1. V tebe [D] slaboch [A] je mocný [Am] boha[G]tier, v tebe [D] mocný [A] som ako [Am] boha[G]tier." },
        { t: "5. Obeta srdca", c: "1. [D] Túžim priniesť na ol[G]tár život, [A] čo v tebe mám." },
        { t: "38. Odej nás do rúcha chvál", c: "1. Odej nás [D]do rúcha chvál. [G]Prelom ťažobu v nás." }
    ];

    let currentSong = null;
    let transpose = 0;
    const parser = new ChordSheetJS.ChordProParser();
    const formatter = new ChordSheetJS.HtmlDivFormatter();

    function draw() {
        const listDiv = document.getElementById('list');
        database.forEach((s) => {
            const d = document.createElement('div');
            d.className = 'song-card';
            d.innerText = s.t;
            d.onclick = () => openSong(s);
            listDiv.appendChild(d);
        });
    }

    function openSong(s) {
        currentSong = s;
        transpose = 0;
        document.getElementById('main-ui').style.display = 'none';
        document.getElementById('view').style.display = 'block';
        document.getElementById('v-title').innerText = s.t;
        render();
        window.scrollTo(0,0);
    }

    function render() {
        const cont = document.getElementById('content');
        if (currentSong.c.includes('[')) {
            // Ak má pieseň akordy v [ ] zátvorkách, sformátuj ich
            try {
                const sheet = parser.parse(currentSong.c).transpose(transpose);
                cont.innerHTML = formatter.format(sheet);
            } catch(e) {
                cont.innerText = currentSong.c;
            }
        } else {
            cont.innerText = currentSong.c;
        }
    }

    function changeKey(v) {
        transpose += v;
        render();
    }

    function back() {
        document.getElementById('main-ui').style.display = 'block';
        document.getElementById('view').style.display = 'none';
    }

    window.onload = draw;
</script>
</body>
</html>
